<div class="demo-container">
  <header class="demo-header">
    <a routerLink="/signals-demo" class="back-link">‚Üê Back to Signals Demo</a>
    <h1>User Registration Form</h1>
    <p class="intro">Demonstrating Angular Signals with a registration form</p>
  </header>

  <section class="form-section">
    <form class="user-form">
      <!-- Basic Signals -->
      <div class="form-subsection">
        <h3>Basic Signals</h3>

        <div class="form-group">
          <label for="firstName">First Name:</label>
          <input
            type="text"
            id="firstName"
            [value]="firstName()"
            (input)="updateSignal(firstName, $event)"
            placeholder="Enter first name"
          />
          <span class="signal-value">{{ firstName() || 'Empty' }}</span>
        </div>

        <div class="form-group">
          <label for="lastName">Last Name:</label>
          <input
            type="text"
            id="lastName"
            [value]="lastName()"
            (input)="updateSignal(lastName, $event)"
            placeholder="Enter last name"
          />
          <span class="signal-value">{{ lastName() || 'Empty' }}</span>
        </div>

        <div class="form-group">
          <label for="age">Age:</label>
          <input
            type="number"
            id="age"
            [value]="age()"
            (input)="updateAge($event)"
            placeholder="Enter age"
            min="0"
          />
          <span class="signal-value">{{ age() || 0 }}</span>
        </div>

        <div class="form-group">
          <label for="email">Email:</label>
          <input
            type="email"
            id="email"
            [value]="email()"
            (input)="updateSignal(email, $event)"
            placeholder="Enter email"
          />
          <span class="signal-value">{{ email() || 'Empty' }}</span>
        </div>
      </div>

      <!-- Computed Signals -->
      <div class="form-subsection">
        <h3>Computed Signals</h3>

        <div class="form-group">
          <label>Full Name:</label>
          <div class="computed-display">
            {{ fullName() || 'Enter first and last name' }}
          </div>
          <p class="explanation">Computed from firstName and lastName</p>
        </div>

        <div class="form-group">
          <label>Age Category:</label>
          <div class="computed-display">
            {{ ageCategory() || 'Enter age' }}
          </div>
          <p class="explanation">Computed from age</p>
        </div>

        <div class="form-group">
          <label>Form Valid:</label>
          <div class="computed-display">
            <span [class.valid]="isFormValid()" [class.invalid]="!isFormValid()">
              {{ isFormValid() ? 'Valid' : 'Invalid' }}
            </span>
          </div>
          <p class="explanation">Computed from all form fields</p>
        </div>

        <div class="form-group">
          <label>Form Summary:</label>
          <div class="computed-display summary">
            <pre>{{ formSummary() | json }}</pre>
          </div>
        </div>
      </div>

      <!-- Model Signal -->
      <div class="form-subsection">
        <h3>Model Signal</h3>

        <div class="form-group">
          <label>Shared Value:</label>
          <input
            type="text"
            [value]="sharedValue()"
            (input)="updateSignal(sharedValue, $event)"
            placeholder="Enter shared value"
          />
          <span class="signal-value">{{ sharedValue() || 'Empty' }}</span>
          <p class="explanation">Bound to child component via model()</p>
        </div>
      </div>

      <!-- Computed Transformation Demo -->
      <div class="form-subsection">
        <h3>Computed Transformation</h3>

        <div class="form-group">
          <label>Select Source Signal:</label>
          <select
            [value]="computedSource()"
            (change)="changeComputedSource($event)"
            class="source-dropdown"
          >
            <option value="firstName">First Name</option>
            <option value="lastName">Last Name</option>
            <option value="email">Email</option>
            <option value="sharedValue">Shared Value</option>
          </select>
        </div>

        <div class="form-group">
          <label>Source Value:</label>
          <div class="computed-display">{{ selectedSourceValue() || 'Empty' }}</div>
        </div>

        <div class="form-group">
          <label>Computed Transformation:</label>
          <div class="computed-display">
            <strong>{{ computedTransformation() }}</strong>
          </div>
          <p class="explanation">Automatically transforms based on selected source signal</p>
        </div>
      </div>

      <!-- Child Component -->
      <div class="form-subsection">
        <h3>Child Component</h3>

        <div class="form-group">
          <app-user-form
            [userName]="fullName()"
            [(sharedModel)]="sharedValue"
            (userSubmitted)="onUserSubmitted($event)"
          ></app-user-form>

          @if (outputData()) {
            <div class="output-display">
              <label>Output Data:</label>
              <div class="output-info">
                <div><strong>Timestamp:</strong> {{ formatOutputTimestamp(outputData()!.timestamp) }}</div>
                <div><strong>User Name:</strong> {{ outputData()!.userName }}</div>
                <div><strong>Shared Model:</strong> {{ outputData()!.sharedModel || 'Empty' }}</div>
              </div>
            </div>
          }
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" (click)="resetForm()" class="btn-reset">Reset Form</button>
      </div>
    </form>
  </section>
</div>
